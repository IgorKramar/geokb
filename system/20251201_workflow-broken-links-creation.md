---
title: Рабочий процесс создания заметок по битым ссылкам по географии
type: Evergreen
status: IN PROGRESS
category: Настройки
topic: География
---

# Рабочий процесс создания заметок по битым ссылкам по географии

Описание процесса работы с битыми ссылками — заметками, на которые есть ссылки в базе знаний, но сами файлы не существуют.

## Основной принцип

При создании заметки по битой ссылке ИИ должен:
1. **Анализировать контекст упоминаний** — находить все места, где упоминается отсутствующая заметка
2. **Задавать вопросы пользователю** — максимум вопросов по теме заметки для получения недостающей информации
3. **Создавать заметку** — на основе ответов пользователя и контекста упоминаний создавать новую заметку
4. **Обновлять ссылки** — проверять, что все ссылки на эту заметку используют правильное имя файла

## Пошаговый процесс

### 1. Выбор битой ссылки для создания заметки

Пользователь указывает заметку из `system/GEOGRAPHY_BROKEN_LINKS.md` или ИИ предлагает заметку на основе:
- Приоритетов (часто упоминаемые, ключевые концепции)
- Количества упоминаний (чем больше упоминаний, тем выше приоритет)
- Категории (страны, города, признаки)

### 2. Анализ контекста упоминаний

ИИ анализирует базу знаний:

#### 2.1. Поиск всех упоминаний

- Ищу все упоминания отсутствующей заметки через `grep`
- Нахожу все варианты названий из `system/GEOGRAPHY_BROKEN_LINKS.md`
- Анализирую контекст каждого упоминания

**Пример:**
Если работаю с `20250101_germany.md`:
- Ищу "Германия", "Германии", "немецкий", "немецкие"
- Нахожу все файлы, где упоминается эта страна
- Анализирую контекст каждого упоминания

#### 2.2. Анализ контекста

Для каждого упоминания определяю:
- В какой заметке упоминается
- В каком контексте (какая информация о предмете заметки)
- Какие связи с другими концепциями упоминаются
- Какая роль/значение предмета заметки в контексте

**Пример анализа контекста:**
```
Упоминание 1: "Дорожные знаки Германии имеют синий фон..."
→ Информация: дорожные знаки, синий фон
→ Связи: дорожные знаки, Европа

Упоминание 2: "В Германии типична фахверковая архитектура..."
→ Информация: архитектура, фахверк
→ Связи: архитектурные стили, Европа

Упоминание 3: "Немецкий язык используется на вывесках..."
→ Информация: язык, вывески
→ Связи: языки, Европа
```

#### 2.3. Определение категории и типа

На основе контекста определяю:
- Категорию заметки (страна, город, признак)
- Тип заметки (страна, столица, дорожные знаки, архитектура)
- Связи с другими заметками
- Примерную структуру заметки

#### 2.4. Поиск похожих заметок

- Ищу заметки того же типа для понимания структуры
- Изучаю примеры хорошо наполненных заметок в этой категории
- Определяю, какие разделы должны быть в заметке

### 3. Формирование вопросов

На основе анализа контекста ИИ формирует список вопросов для пользователя:

#### 3.1. Типы вопросов

**Для стран:**
- Какие дорожные знаки характерны? (форма, цвет, особенности)
- Какая архитектура типична? (стили, материалы)
- Какая растительность характерна? (деревья, ландшафты)
- Какой климат? (визуальные признаки)
- Какие языки используются? (на вывесках, знаках)
- Какие особенности инфраструктуры? (типы дорог, столбы, ограждения)
- Региональные различия внутри страны?

**Для городов:**
- Где находится? (страна, регион)
- Как выглядит? (архитектура, планировка)
- Какие особенности? (уникальные признаки)
- Какие дорожные знаки используются?
- Какая растительность характерна?
- Какие языки на вывесках?

**Для признаков:**
- Что это за признак? (описание)
- Где встречается? (страны, регионы)
- Как выглядит? (визуальные характеристики)
- Какие варианты существуют? (региональные различия)
- Как использовать для определения местоположения?

#### 3.2. Принцип максимума вопросов

ИИ задает **максимум вопросов**, которые могут помочь создать заметку:
- Не ограничиваюсь минимальным набором
- Задаю уточняющие вопросы на основе контекста
- Спрашиваю о деталях, которые могут быть важны
- Предлагаю варианты, если что-то неясно из контекста

**Пример вопросов для `germany.md`:**
1. Какие дорожные знаки характерны для Германии? (форма, цвет, особенности)
2. Какая архитектура типична? (стили, материалы)
3. Какая растительность характерна? (деревья, ландшафты)
4. Какой климат? (визуальные признаки)
5. Какие языки используются на вывесках?
6. Какие особенности инфраструктуры? (типы дорог, столбы)
7. Есть ли региональные различия внутри Германии?

### 4. Получение ответов от пользователя

Пользователь отвечает на вопросы. ИИ:
- Запоминает все ответы
- Уточняет непонятные моменты
- Может задавать дополнительные вопросы на основе ответов
- Сопоставляет ответы с контекстом из упоминаний

### 5. Создание заметки

На основе ответов пользователя и контекста упоминаний ИИ создает новую заметку:

#### 5.1. Определение имени файла

- Использую имя файла из `system/GEOGRAPHY_BROKEN_LINKS.md`
- Если имя файла не указано или не подходит, создаю новое по правилам:
  - Формат: `YYYYMMDD_descriptive-name.md`
  - Получаю актуальный timestamp через команду терминала
  - Описательное имя на латинице, слова разделены дефисами

#### 5.2. Структура заметки

Заметка должна содержать:
- **YAML FrontMatter** с полями:
  - `title`: название заметки
  - `type`: тип (Evergreen, Literature, Fleeting, Project)
  - `status`: статус (IN PROGRESS, COMPLETE, TODO)
  - `category`: категория для тематической организации
  - `topic: География`: флаг для заметок по географии
- **Основная информация** — общее описание
- **Признаки для GeoGuessr** — конкретные признаки для определения местоположения
- **Географические особенности** — ландшафт, климат
- **Культурные особенности** — язык, архитектура
- **Связи** — естественные ссылки на связанные заметки внутри текста

#### 5.3. Использование контекста из упоминаний

ИИ использует:
- Информацию из всех упоминаний в других заметках
- Контекст использования в существующих файлах
- Структуру похожих заметок
- Стиль и тон существующих заметок

#### 5.4. Естественные ссылки

Все ссылки создаются:
- Внутри текста, естественным потоком
- На основе упоминаний связанных концепций
- С проверкой через MOC и маппинг ссылок
- В правильном формате `[текст](./filename.md)`

#### 5.5. Обратные ссылки

После создания заметки проверяю:
- Все ли упоминания в других заметках используют правильное имя файла
- Нужно ли обновить какие-то ссылки в существующих заметках
- Все ли варианты названий из `GEOGRAPHY_BROKEN_LINKS.md` теперь ведут на правильный файл

### 6. Обновление ссылок в существующих заметках

После создания заметки:

1. **Проверяю все упоминания** — нахожу все места, где упоминается эта заметка
2. **Обновляю ссылки** — заменяю текстовые упоминания на правильные ссылки `[текст](./filename.md)`
3. **Проверяю варианты названий** — убеждаюсь, что все варианты из `GEOGRAPHY_BROKEN_LINKS.md` теперь ведут на правильный файл
4. **Обновляю маппинг ссылок** — запускаю `python kb.py all` для обновления маппинга

### 7. Обновление мета-файлов

После создания заметки и обновления ссылок:
1. Запускаю `python kb.py all` из корня проекта
2. Это обновляет:
   - Маппинг ссылок (`system/LINK_MAPPING.json`, `system/LINK_MAPPING.md`)
   - Список битых ссылок (`system/GEOGRAPHY_BROKEN_LINKS.md`) — заметка должна исчезнуть из списка
   - Список бедных заметок (`system/GEOGRAPHY_POOR_CONTENT.md`) — если заметка получилась бедной

### 8. Обновление навигации

Если заметка важна для навигации:
1. Обновляю MOC-заметки ([MOC - Map of Content (География)](./src/20250101_moc-map-of-content-geography.md))
2. Добавляю ссылку на новую заметку в соответствующий раздел
3. Обновляю MOC по категориям, если нужно

### 9. Коммит изменений

После создания заметки и обновления всех ссылок:
1. Перехожу в корень проекта
2. Получаю актуальный timestamp
3. Добавляю изменения: `git add .` (в корне проекта)
4. Создаю коммит: `git commit -m '[YYYYMMDD] - Создана заметка о [название]'`

## Примеры работы

### Пример 1: Страна

**Битая ссылка:** `20250101_germany.md` (5 упоминаний)

**Анализ контекста:**
- Найдено 5 упоминаний в разных заметках
- Контекст: дорожные знаки, архитектура, язык
- Определена категория: страна

**Вопросы пользователю:**
1. Какие дорожные знаки характерны для Германии?
2. Какая архитектура типична?
3. Какая растительность характерна?
4. Какой климат?
5. Какие языки используются?
6. Особенности инфраструктуры?

**После ответов:**
- Создаю заметку с описанием признаков страны
- Добавляю ссылки на связанные заметки (дорожные знаки, архитектура)
- Обновляю все упоминания в других заметках на правильные ссылки
- Запускаю `python kb.py all`

### Пример 2: Признак

**Битая ссылка:** `20250101_road-signs-europe.md` (1 упоминание)

**Анализ контекста:**
- Найдено упоминание "дорожные знаки Европы" в заметке о странах
- Контекст: признак для определения местоположения
- Определена категория: признак

**Вопросы пользователю:**
1. Какие типы дорожных знаков характерны для Европы?
2. Какие особенности формы и цвета?
3. Какие различия между странами?
4. Как использовать для определения местоположения?

**После ответов:**
- Создаю заметку о признаке
- Добавляю ссылки на связанные заметки (страны, где встречается)
- Обновляю упоминание в других заметках
- Запускаю `python kb.py all`

## Интеграция в рабочий процесс

### После каждой работы с базой знаний

После обработки входящей информации по географии:
1. Запускаю `python kb.py all` из корня проекта
2. Это обновляет:
   - Маппинг ссылок (`system/LINK_MAPPING.json`, `system/LINK_MAPPING.md`)
   - Список битых ссылок (`system/GEOGRAPHY_BROKEN_LINKS.md`)
   - Список бедных заметок (`system/GEOGRAPHY_POOR_CONTENT.md`)

### Периодическое создание заметок

Можно выделять время на создание заметок по битым ссылкам:
- Выбирать по приоритету (количество упоминаний, важность)
- Работать с несколькими заметками подряд
- Использовать этот процесс для каждой заметки

## Чеклист создания заметки по битой ссылке

- [ ] Нашел все упоминания отсутствующей заметки через `grep`
- [ ] Проанализировал контекст каждого упоминания
- [ ] Определил категорию и тип заметки
- [ ] Изучил примеры хорошо наполненных заметок того же типа
- [ ] Сформировал максимум вопросов для пользователя на основе контекста
- [ ] Получил ответы от пользователя
- [ ] Определил правильное имя файла (из `GEOGRAPHY_BROKEN_LINKS.md` или создал новое)
- [ ] Создал заметку на основе ответов и контекста упоминаний
- [ ] Добавил естественные ссылки на связанные заметки внутри текста
- [ ] Обновил все упоминания в других заметках на правильные ссылки
- [ ] Проверил, что все варианты названий ведут на правильный файл
- [ ] Запустил `python kb.py all` из корня проекта
- [ ] Проверил, что заметка больше не в списке битых ссылок
- [ ] Обновил MOC-заметки, если заметка важна для навигации
- [ ] Закоммитил изменения с правильным форматом сообщения

## Важные принципы

1. **Максимум вопросов** — не ограничиваюсь минимальным набором, задаю все вопросы, которые могут помочь
2. **Анализ контекста** — всегда анализирую все упоминания перед вопросами
3. **Синтез информации** — объединяю ответы пользователя с контекстом из упоминаний
4. **Обновление ссылок** — после создания заметки обновляю все упоминания в других заметках
5. **Правильное имя файла** — использую имя из `GEOGRAPHY_BROKEN_LINKS.md` или создаю новое по правилам
6. **Естественные ссылки** — все ссылки внутри текста, не в отдельном разделе
7. **Обновление навигации** — после создания запускаю `python kb.py all` для обновления всех мета-файлов

## Связь с другими процессами

- **Бедные заметки**: После создания заметки по битой ссылке она может оказаться в списке бедных заметок — тогда применяю [процесс наполнения бедных заметок](./20251201_workflow-poor-content-enrichment.md)
- **Входящая информация**: При обработке новой информации могут появиться новые битые ссылки — они автоматически попадут в `GEOGRAPHY_BROKEN_LINKS.md` после запуска `python kb.py all`

