---
title: Рабочий процесс обработки входящей информации по географии
type: Evergreen
status: IN PROGRESS
category: Настройки
topic: География
---

# Рабочий процесс обработки входящей информации по географии

Описание процесса работы с входящей информацией о географии, странах, городах и признаках для GeoGuessr.

## Основные принципы

1. **Проверка существующих заметок** — перед созданием новой заметки проверяю, не существует ли уже заметка на эту тему
2. **Обновление вместо дублирования** — если заметка существует, обновляю её, а не создаю дубликат
3. **Разрешение конфликтов** — при обнаружении смысловых конфликтов или неувязок сначала спрашиваю пользователя
4. **Связывание заметок** — создаю естественные ссылки внутри текста, не в отдельном разделе
5. **Обновление навигации** — после изменений обновляю MOC-заметки и маппинг ссылок

## Пошаговый процесс

### 1. Получение входящей информации

Пользователь предоставляет новую информацию о географии. Это может быть:
- Новые детали о существующих странах или городах
- Информация о новых признаках (дорожные знаки, архитектура, растительность)
- Уточнения и исправления существующей информации
- Описание новых техник определения местоположения

### 2. Проверка существующих заметок

Перед созданием или обновлением заметок проверяю:

#### 2.1. Проверка MOC-заметок
- [MOC - Map of Content (География)](./src/20250101_moc-map-of-content-geography.md) — главная навигация по всем заметкам о географии
- [MOC - Страны](./src/20250101_moc-countries.md) — навигация по странам
- [MOC - Города](./src/20250101_moc-cities.md) — навигация по городам
- [MOC - Признаки](./src/20250101_moc-features.md) — навигация по признакам

#### 2.2. Проверка маппинга ссылок
- [LINK_MAPPING.json](./LINK_MAPPING.json) — маппинг всех ссылок в базе знаний
- [LINK_MAPPING.md](./LINK_MAPPING.md) — человекочитаемый маппинг

Это помогает:
- Найти существующие заметки на похожую тему
- Избежать создания дубликатов
- Использовать правильные имена файлов для ссылок

### 3. Обработка информации

#### 3.1. Если заметка уже существует

**Действия:**
1. Читаю существующую заметку
2. Сравниваю с новой информацией
3. Определяю, есть ли конфликты или противоречия
4. Если есть конфликты — спрашиваю пользователя перед изменением
5. Если конфликтов нет — обновляю заметку новой информацией
6. Добавляю естественные ссылки на связанные заметки внутри текста

**Пример:**
Если пользователь предоставил новую информацию о дорожных знаках России, а заметка `20250101_russia.md` уже существует:
- Читаю существующую заметку
- Проверяю на конфликты
- Обновляю заметку новой информацией
- Добавляю ссылки на связанные концепции (дорожные знаки, архитектура и т.д.)

#### 3.2. Если заметка не существует

**Действия:**
1. Получаю актуальный timestamp через команду терминала (`date +"%Y%m%d"` для Linux/macOS или `Get-Date -Format "yyyyMMdd"` для Windows)
2. Создаю новую заметку с именем `YYYYMMDD_descriptive-name.md`
3. Добавляю YAML FrontMatter с полями:
   - `title`: заголовок заметки
   - `type`: тип заметки (Evergreen, Literature, Fleeting, Project)
   - `status`: статус (IN PROGRESS, COMPLETE, TODO)
   - `category`: категория заметки
   - `topic: География`: флаг для заметок по географии
4. Пишу заметку с описанием признаков и особенностей
5. Добавляю естественные ссылки на связанные заметки внутри текста
6. Проверяю, что все ссылки указывают на существующие файлы

**Пример:**
Если пользователь предоставил информацию о новой стране "Франция":
- Проверяю MOC — заметка `20250101_france.md` может существовать или нет
- Создаю или обновляю заметку с информацией о признаках Франции

### 4. Обнаружение конфликтов

Если новая информация противоречит существующей:

**Действия:**
1. Останавливаюсь и не вношу изменения автоматически
2. Описываю пользователю обнаруженный конфликт
3. Спрашиваю, какая версия является правильной
4. После получения ответа обновляю заметки соответственно

**Пример:**
Если пользователь сказал, что дорожные знаки России имеют синий фон, а в заметке написано, что они белые:
- Обнаруживаю конфликт
- Спрашиваю пользователя: "Какая версия правильная?"
- После ответа обновляю заметку

### 5. Обновление навигации

После создания или обновления заметок:

#### 5.1. Обновление MOC-заметок
- [MOC - Map of Content (География)](./src/20250101_moc-map-of-content-geography.md) — добавляю ссылки на новые заметки в соответствующие разделы
- [MOC - Страны](./src/20250101_moc-countries.md) — добавляю новые страны
- [MOC - Города](./src/20250101_moc-cities.md) — добавляю новые города
- [MOC - Признаки](./src/20250101_moc-features.md) — добавляю новые признаки
- Если по теме создано много заметок (10+), создаю под-MOC и добавляю ссылку на него в главный MOC

#### 5.2. Обновление маппинга ссылок
- Запускаю скрипт: `python kb.py link-mapping` или `python scripts/build_link_mapping.py`
- Это обновляет `system/LINK_MAPPING.json` и `system/LINK_MAPPING.md`
- Проверяю, что все новые ссылки правильно замаплены

### 6. Обновление мета-файлов

После завершения всех работ по обработке информации:

1. Перехожу в корень проекта: `cd /path/to/geokb` (или просто убеждаюсь, что нахожусь в корне)
2. Запускаю все скрипты: `python kb.py all`
3. Это обновляет:
   - Маппинг ссылок (`system/LINK_MAPPING.json`, `system/LINK_MAPPING.md`)
   - Список бедных заметок (`system/GEOGRAPHY_POOR_CONTENT.md`)
   - Список битых ссылок (`system/GEOGRAPHY_BROKEN_LINKS.md`)

### 7. Коммит изменений

После обновления мета-файлов:

1. Получаю актуальный timestamp: `date +"%Y%m%d"` (Linux/macOS) или `Get-Date -Format "yyyyMMdd"` (Windows)
2. **Важно**: Добавляю все изменения командой `git add .` в корне проекта (не `git add -A` и не добавление конкретных файлов из другой директории)
3. Создаю коммит с сообщением: `git commit -m '[YYYYMMDD] - [краткое описание на русском в одно предложение]'`
4. Отправляю изменения: `git push`

**Формат сообщения коммита:**
```
[YYYYMMDD] - Краткое описание изменений на русском языке в одно предложение
```

**Примеры:**
- `[20251201] - Добавлена информация о дорожных знаках России и их особенностях`
- `[20251201] - Обновлена заметка о Франции с информацией об архитектурных стилях`
- `[20251201] - Создана заметка о признаках определения Японии в GeoGuessr`

## Специфические случаи

### Переименование файлов

Если нужно переименовать файл (например, `usa` → `united-states`):

1. Переименовываю файл
2. Ищу все ссылки на старое имя через `grep` или маппинг ссылок
3. Обновляю все ссылки на новое имя
4. Запускаю `build_link_mapping.py` для обновления маппинга
5. Коммичу изменения

### Массовое обновление

Если нужно обновить много заметок одновременно:

1. Создаю план изменений
2. Выполняю изменения последовательно
3. После каждого логического блока проверяю результат
4. Обновляю MOC и маппинг ссылок
5. Коммичу все изменения одним коммитом с описанием всех изменений

### Работа с битыми ссылками

Периодически проверяю битые ссылки:

1. Запускаю: `python kb.py broken-links`
2. Просматриваю `system/GEOGRAPHY_BROKEN_LINKS.md`
3. Создаю недостающие заметки или исправляю ссылки
4. Обновляю маппинг ссылок

### Работа с бедными на контент заметками

Периодически проверяю заметки с бедным контентом:

1. Запускаю: `python kb.py poor-content`
2. Просматриваю `system/GEOGRAPHY_POOR_CONTENT.md`
3. Определяю приоритеты для наполнения заметок
4. Наполняю заметки контентом по мере возможности

Подробнее: [Процесс наполнения бедных заметок](./20251201_workflow-poor-content-enrichment.md)

### Работа с битыми ссылками

Периодически проверяю битые ссылки и создаю отсутствующие заметки:

1. Запускаю: `python kb.py broken-links`
2. Просматриваю `system/GEOGRAPHY_BROKEN_LINKS.md`
3. Определяю приоритеты для создания заметок (по количеству упоминаний)
4. Создаю отсутствующие заметки по мере возможности

Подробнее: [Процесс создания заметок по битым ссылкам](./20251201_workflow-broken-links-creation.md)

### Факт-ревью базы знаний

Периодически провожу факт-ревью для проверки консистентности:

1. Определяю область проверки (тематическая, географическая, полное ревью)
2. Собираю все заметки для проверки
3. Систематически анализирую заметки на несоответствия
4. Выявляю проблемы (фактические, смысловые, логические, структурные, терминологические)
5. Формирую вопросы и предложения по улучшению
6. Создаю репорт в `system/` с именем `YYYYMMDD_fact-review-[тема].md`

Подробнее: [Процесс факт-ревью базы знаний](./20251201_workflow-fact-review.md)

## Инструменты

### Скрипты автоматизации

Все скрипты находятся в папке `scripts/` и доступны через главный скрипт `kb.py`:

- `python kb.py link-mapping` — обновить маппинг ссылок
- `python kb.py poor-content` — найти заметки с бедным контентом
- `python kb.py broken-links` — найти битые ссылки
- `python kb.py create-note -n "name" -t "template"` — создать новую заметку
- `python kb.py all` — запустить все скрипты по порядку

**Важно:** После каждой работы с базой знаний по географии запускаю `python kb.py all` из корня проекта для обновления всех мета-файлов.

### Файлы маппинга

- `system/LINK_MAPPING.json` — структурированный маппинг в формате JSON
- `system/LINK_MAPPING.md` — человекочитаемый маппинг в формате Markdown
- `system/GEOGRAPHY_BROKEN_LINKS.md` — список битых ссылок по географии
- `system/GEOGRAPHY_POOR_CONTENT.md` — список заметок с бедным контентом

## Чеклист обработки входящей информации

- [ ] Проверил существующие заметки через MOC и маппинг ссылок
- [ ] Определил, нужно ли создавать новую заметку или обновить существующую
- [ ] Проверил на наличие конфликтов с существующей информацией
- [ ] Если есть конфликты — спросил пользователя перед изменением
- [ ] Создал или обновил заметку с правильным форматом
- [ ] Добавил естественные ссылки на связанные заметки внутри текста
- [ ] Обновил MOC-заметки ([MOC - Map of Content (География)](./src/20250101_moc-map-of-content-geography.md))
- [ ] Запустил `python kb.py all` из корня проекта для обновления всех мета-файлов
- [ ] Проверил, что все ссылки работают
- [ ] Закоммитил изменения с правильным форматом сообщения (`git add .` в корне проекта)

## Важные правила

1. **Никогда не создавать дубликаты** — всегда проверяю существующие заметки
2. **Всегда спрашивать при конфликтах** — не вношу изменения автоматически при противоречиях
3. **Естественные ссылки** — ссылки внутри текста, а не в отдельном разделе
4. **Timestamp не меняется** — после создания файла timestamp в имени не меняется
5. **Обновлять навигацию** — после изменений обязательно обновляю MOC и маппинг ссылок

